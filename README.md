# WebdriverIO-course

## Pre-requisites

- NVM (Node Version Manager)
    - [Unix](https://github.com/nvm-sh/nvm#installing-and-updating)
    - [Windows](https://github.com/coreybutler/nvm-windows#installation--upgrades) 
    
    Install nvm and use active LTS version of nodejs. [More about lts versions](https://nodejs.org/en/about/releases/).
    
- [Visual Studio Code](https://code.visualstudio.com/)

## Table of Contents

- [Step1](#step1) 

## Step1

### Localhost application

For our test framework we need to select application under the test (AUT). We will use [Cypress Real-World-App](https://github.com/cypress-io/cypress-realworld-app) (what a surprise). What the app it is and what's it made of - you can read on GitHub. The main thing you need know is that this app uses [yarn](https://yarnpkg.com/), and you need to install it via npm:

```shell
npm i yarn -g
```

Clone this project and follow the guide for deploy (basically, you will need to run tow commands: `yarn install` and `yarn dev`). After application start you will be able to access it by `http://localhost:3000`. There will be a login form, so you credentials you can find in `/data/database.json`.

### Test framework backbone

First of all, make sure you're installed `nodejs` through `nvm`. In my case, I installed node 16.13.1 and made in default by command:
    
- Unix: `nvm alias default 16.13.1`
- Windows: `nvm use 16.13.1`

If everything is correct - init project with npm: `npm init -y`. Then, install WDIO-CLI: `npm i @wdio/cli -D`. 
Check you CLI by `npx wdio --help`. If it shows an output of commands - great. 

Lets create backbone for our test framework: 
```shell
npx wdio config
``` 

We gonna need to select some options: 

`local machine` -> `mocha` -> `no compiliers` -> just press Enter -> `Y` autogenerate some test files -> use Page Objects -> set default location for Page Objects -> use only `spec` reporter -> don't use `wait-for` lib, just press Enter -> use only `chromedriver` -> skip `baseUrl` setup. 

Greate, now you have a backbone, generated from WDIO-CLI. 

Run `npx wdio wdio.conf.js`. It will run autogenerated spec.


### First test

After we have deployed the app, we can start writing our automated tests. Lets create `login.spec.js` in our `./test/specs`. 

```js
describe("Test suite",()=>{
    it("Test case",async()=>{
        await browser.url("/");
        let usernameInput = await $('#username');
        let passwordInput = await $("#password")
        await usernameInput.waitForDisplayed();
        await usernameInput.setValue("Tavares_Barrows");
        await passwordInput.setValue("s3cret");
        await $('[data-test="signin-submit"]').waitForEnabled();
        await $('[data-test="signin-submit"]').click();
        await $('[data-test="transaction-list"]').waitForDisplayed();
        await browser.saveScreenshot("./image.png");
    })
})
```

Run this with next command
```shell
npx wdio wdio.conf.js --spec ./test/specs/login
```

**NOTE:** If test will fail with invalid credentials - find valid one in `./data/database.json` and put in this line: 
```js
await usernameInput.setValue("specific_username");
```

